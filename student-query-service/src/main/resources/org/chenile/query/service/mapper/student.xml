 

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
<mapper namespace = "Student">

  <resultMap id = "result" type = "map">
   <result property = "id" column = "ID"/>
   <result property = "name" column = "NAME"/>
   <result property = "branch" column = "BRANCH"/>
   <result property = "percentage" column = "PERCENTAGE"/>
   <result property = "phone" column = "PHONE"/>
   <result property = "email" column = "EMAIL"/>
</resultMap>

<select id = "getAllExperimental" resultMap = "result">	
   SELECT * FROM STUDENT
   where 1 =1
    <if test="propNames != null and propValues != null">
       <foreach item="propName" index="index" collection="propNames">
        and ${propName} = #{propValues[${index}]}
       </foreach>
    </if>

</select>


<select id='getAll-count' resultType="int" >
	select count(*) from STUDENT
</select>

<select id = "getAll" resultMap = "result">	
   SELECT * FROM STUDENT ${orderby} ${pagination}
</select>

<select id = "getSpecific" resultMap = "result">	
   SELECT * FROM STUDENT
    <where>
    <if test="branch != null">
         branch in
	    <foreach item="item" index="index" collection="branch"
	             open="(" separator="," close=")">
	        #{item}
	    </foreach>
    </if>
    <if test="name != null">
        AND name like #{name}
    </if>
    <if test="phone != null">
        AND phone = #{phone}
    </if>
  </where>
  ${orderby} ${pagination}
</select>

<select id = "getById" parameterType = "int" resultMap = "result">
  <![CDATA[
   SELECT * FROM STUDENT WHERE ID = #{id};
  ]]>
</select>


    	
</mapper>